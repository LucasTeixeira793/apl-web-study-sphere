{"ast":null,"code":"import { fromEvent } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../shared/services/login.service\";\nimport * as i3 from \"../shared/services/highlight.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"textArea\"];\nconst _c1 = [\"codeContent\"];\nconst _c2 = [\"pre\"];\nconst _c3 = function (a1) {\n  return [\"code\", a1];\n};\nclass LandingComponent {\n  get contentControl() {\n    return this.form.get('content');\n  }\n  constructor(router, loginService, highlightService, fb, renderer, el) {\n    this.router = router;\n    this.loginService = loginService;\n    this.highlightService = highlightService;\n    this.fb = fb;\n    this.renderer = renderer;\n    this.el = el;\n    this.highlighted = false;\n    this.codeType = 'typescript';\n    this.form = this.fb.group({\n      content: ''\n    });\n  }\n  ngOnInit() {\n    this.listenForm();\n    this.syncScroll();\n    if (this.loginService.isLoggedIn()) {\n      this.router.navigate(['/home']);\n    }\n  }\n  ngAfterViewChecked() {\n    if (this.highlighted) {\n      this.highlightService.highlightAll();\n      this.highlighted = false;\n    }\n  }\n  ngAfterViewInit() {\n    this.highlightService.highlightAll();\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  listenForm() {\n    this.sub = this.form.valueChanges.subscribe(val => {\n      const modifiedContent = this.highlightService.convertHtmlToString(val.content ?? \"\");\n      this.renderer.setProperty(this.codeContent.nativeElement, 'innerHTML', modifiedContent);\n      this.highlighted = true;\n    });\n  }\n  syncScroll() {\n    const localSub = fromEvent(this.textArea.nativeElement, 'scroll').subscribe(() => {\n      const toTop = this.textArea.nativeElement.scrollTop;\n      const toLeft = this.textArea.nativeElement.scrollLeft;\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollTop', toTop);\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollLeft', toLeft + 0.2);\n    });\n    this.sub.add(localSub);\n  }\n}\nLandingComponent.ɵfac = function LandingComponent_Factory(t) {\n  return new (t || LandingComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.HighlightService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\nLandingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LandingComponent,\n  selectors: [[\"app-landing\"]],\n  viewQuery: function LandingComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n      i0.ɵɵviewQuery(_c2, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.textArea = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.codeContent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pre = _t.first);\n    }\n  },\n  decls: 11,\n  vars: 4,\n  consts: [[3, \"formGroup\"], [1, \"code-container\", \"line-numbers\"], [\"formControlName\", \"content\", \"spellcheck\", \"false\", 1, \"text-area-code-editor\"], [\"textArea\", \"\"], [\"aria-hidden\", \"true\", 1, \"pre\"], [\"pre\", \"\"], [3, \"ngClass\"], [\"codeContent\", \"\"]],\n  template: function LandingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1)(2, \"textarea\", 2, 3);\n      i0.ɵɵtext(4, \"        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"pre\", 4, 5);\n      i0.ɵɵtext(7, \"            \");\n      i0.ɵɵelement(8, \"code\", 6, 7);\n      i0.ɵɵtext(10, \"\\n        \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c3, \"language-\" + ctx.codeType));\n    }\n  },\n  dependencies: [i5.NgClass, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 900:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nSyntaxError\\\\n\\\\n(71:1) C:\\\\\\\\Projetos\\\\\\\\apl-web-study-sphere\\\\\\\\src\\\\\\\\app\\\\\\\\landing\\\\\\\\landing.component.css Unknown word\\\\n\\\\n \\\\u001b[90m 69 | \\\\u001b[39m\\\\u001b[33m}\\\\u001b[39m\\\\n \\\\u001b[90m 70 | \\\\u001b[39m\\\\n\\\\u001b[1m\\\\u001b[31m>\\\\u001b[39m\\\\u001b[22m\\\\u001b[90m 71 | \\\\u001b[39m\\\\u001b[33m.lin\\\\u001b[39m\\\\n \\\\u001b[90m    | \\\\u001b[39m\\\\u001b[1m\\\\u001b[31m^\\\\u001b[39m\\\\u001b[22m\\\\n\\\");\\n\\n })\\n\\n \\t})[_ngcontent-%COMP%];\\n\\n \\t\\n \\t//[_ngcontent-%COMP%]   startup[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   Load[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   and[_ngcontent-%COMP%]   return[_ngcontent-%COMP%]   exports[_ngcontent-%COMP%]   //[_ngcontent-%COMP%]   This[_ngcontent-%COMP%]   entry[_ngcontent-%COMP%]   module[_ngcontent-%COMP%]   doesn't[_ngcontent-%COMP%]   tell[_ngcontent-%COMP%]   about[_ngcontent-%COMP%]   it's[_ngcontent-%COMP%]   top-level[_ngcontent-%COMP%]   declarations[_ngcontent-%COMP%]   so[_ngcontent-%COMP%]   it[_ngcontent-%COMP%]   can't[_ngcontent-%COMP%]   be[_ngcontent-%COMP%]   inlined[_ngcontent-%COMP%]   var[_ngcontent-%COMP%]   __webpack_exports__[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] {};\\n \\t__webpack_modules__[900]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=landing.component.css.map*/\"]\n});\nexport { LandingComponent };","map":{"version":3,"names":["fromEvent","LandingComponent","contentControl","form","get","constructor","router","loginService","highlightService","fb","renderer","el","highlighted","codeType","group","content","ngOnInit","listenForm","syncScroll","isLoggedIn","navigate","ngAfterViewChecked","highlightAll","ngAfterViewInit","ngOnDestroy","sub","unsubscribe","valueChanges","subscribe","val","modifiedContent","convertHtmlToString","setProperty","codeContent","nativeElement","localSub","textArea","toTop","scrollTop","toLeft","scrollLeft","pre","add","i0","ɵɵdirectiveInject","i1","Router","i2","LoginService","i3","HighlightService","i4","FormBuilder","Renderer2","ElementRef","selectors","viewQuery","LandingComponent_Query","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","ɵɵadvance","ɵɵpureFunction1","_c3"],"sources":["C:\\Projetos\\apl-web-study-sphere\\src\\app\\landing\\landing.component.ts","C:\\Projetos\\apl-web-study-sphere\\src\\app\\landing\\landing.component.html"],"sourcesContent":["import { Component, OnInit, ElementRef, Renderer2, AfterViewChecked, AfterViewInit, ViewChild, OnDestroy } from '@angular/core';\r\nimport { LoginService } from '../shared/services/login.service';\r\nimport { Router } from '@angular/router';\r\nimport { HighlightService } from '../shared/services/highlight.service';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-landing',\r\n  templateUrl: './landing.component.html',\r\n  styleUrls: ['./landing.component.css']\r\n})\r\nexport class LandingComponent implements OnInit, AfterViewChecked, AfterViewInit, OnDestroy {\r\n  @ViewChild('textArea', { static: true })\r\n  textArea!: ElementRef;  \r\n  @ViewChild('codeContent', { static: true })\r\n  codeContent!: ElementRef;  \r\n  @ViewChild('pre', { static: true })\r\n  pre!: ElementRef;\r\n\r\n  sub!: Subscription;\r\n  highlighted: boolean = false;\r\n  codeType = 'typescript'\r\n\r\n  form = this.fb.group({\r\n    content: ''\r\n  });\r\n\r\n  get contentControl() {\r\n    return this.form.get('content');\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private loginService: LoginService,\r\n    private highlightService: HighlightService,\r\n    private fb: FormBuilder,\r\n    private renderer: Renderer2,\r\n    private el: ElementRef\r\n  ){}\r\n    \r\n  ngOnInit(): void {\r\n    this.listenForm();\r\n    this.syncScroll();\r\n\r\n    if(this.loginService.isLoggedIn()){\r\n      this.router.navigate(['/home']);\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.highlighted){\r\n      this.highlightService.highlightAll();\r\n      this.highlighted = false;\r\n    }\r\n  }\r\n  \r\n  ngAfterViewInit(): void {\r\n    this.highlightService.highlightAll();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n  private listenForm() {\r\n    this.sub = this.form.valueChanges.subscribe((val) => {\r\n      const modifiedContent = this.highlightService.convertHtmlToString(val.content ?? \"\");\r\n      this.renderer.setProperty(this.codeContent.nativeElement, 'innerHTML', modifiedContent);\r\n      this.highlighted = true;\r\n    })\r\n  }\r\n\r\n  private syncScroll() {\r\n    const localSub = fromEvent(this.textArea.nativeElement, 'scroll').subscribe(() => {\r\n      const toTop = this.textArea.nativeElement.scrollTop;\r\n      const toLeft = this.textArea.nativeElement.scrollLeft;\r\n\r\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollTop', toTop)\r\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollLeft', toLeft + 0.2)\r\n    });\r\n    this.sub.add(localSub);\r\n  }\r\n  \r\n}\r\n","<!-- <div>\r\n    <select [(ngModel)]=\"language\" (change)=\"updateLanguage()\">\r\n      <option value=\"\">text</option>\r\n      <option value=\"language-typescript\">TypeScript</option>\r\n      <option value=\"language-dotnet\">CSharp</option>\r\n      <option value=\"language-sql\">SQL</option>\r\n      <option value=\"language-css\">CSS</option>\r\n      <option value=\"language-scss\">SCSS</option>\r\n      <option value=\"language-html\">HTML</option>\r\n    </select>\r\n  \r\n    <pre>\r\n        <textarea [(ngModel)]=\"htmlContent\"></textarea>\r\n    </pre>\r\n  \r\n    <pre>\r\n      <code [innerHTML]=\"htmlContent\" id=\"codeArea\" #codeArea></code>\r\n    </pre>\r\n</div> -->\r\n\r\n<form [formGroup]=\"form\">\r\n    <div class=\"code-container line-numbers\">\r\n        <textarea #textArea formControlName=\"content\" class=\"text-area-code-editor\" spellcheck=\"false\">\r\n        </textarea>\r\n        <pre #pre aria-hidden=\"true\" class=\"pre\">\r\n            <code #codeContent [ngClass]=\"['code', 'language-' + codeType]\"></code>\r\n        </pre>\r\n    </div>\r\n</form>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}