{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { fromEvent } from 'rxjs';\nlet LandingComponent = class LandingComponent {\n  get contentControl() {\n    return this.form.get('content');\n  }\n  constructor(router, loginService, highlightService, fb, renderer, el) {\n    this.router = router;\n    this.loginService = loginService;\n    this.highlightService = highlightService;\n    this.fb = fb;\n    this.renderer = renderer;\n    this.el = el;\n    this.highlighted = false;\n    this.codeType = 'markup';\n    this.form = this.fb.group({\n      content: ''\n    });\n  }\n  updateHighlight() {\n    this.highlightService.highlightAll();\n  }\n  ngOnInit() {\n    this.listenForm();\n    this.syncScroll();\n    if (this.loginService.isLoggedIn()) {\n      this.router.navigate(['/home']);\n    }\n  }\n  ngAfterViewChecked() {\n    if (this.highlighted) {\n      this.updateHighlight();\n      this.highlighted = false;\n    }\n  }\n  ngAfterViewInit() {\n    this.updateHighlight();\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  listenForm() {\n    this.sub = this.form.valueChanges.subscribe(val => {\n      const modifiedContent = this.highlightService.convertHtmlToString(val.content ?? \"\");\n      this.renderer.setProperty(this.codeContent.nativeElement, 'innerHTML', modifiedContent);\n      this.highlighted = true;\n    });\n  }\n  syncScroll() {\n    const localSub = fromEvent(this.textArea.nativeElement, 'scroll').subscribe(() => {\n      const toTop = this.textArea.nativeElement.scrollTop;\n      const toLeft = this.textArea.nativeElement.scrollLeft;\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollTop', toTop);\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollLeft', toLeft + 0.2);\n    });\n    this.sub.add(localSub);\n  }\n};\n__decorate([ViewChild('textArea', {\n  static: true\n})], LandingComponent.prototype, \"textArea\", void 0);\n__decorate([ViewChild('codeContent', {\n  static: true\n})], LandingComponent.prototype, \"codeContent\", void 0);\n__decorate([ViewChild('pre', {\n  static: true\n})], LandingComponent.prototype, \"pre\", void 0);\nLandingComponent = __decorate([Component({\n  selector: 'app-landing',\n  templateUrl: './landing.component.html',\n  styleUrls: ['./landing.component.css']\n})], LandingComponent);\nexport { LandingComponent };","map":{"version":3,"names":["Component","ViewChild","fromEvent","LandingComponent","contentControl","form","get","constructor","router","loginService","highlightService","fb","renderer","el","highlighted","codeType","group","content","updateHighlight","highlightAll","ngOnInit","listenForm","syncScroll","isLoggedIn","navigate","ngAfterViewChecked","ngAfterViewInit","ngOnDestroy","sub","unsubscribe","valueChanges","subscribe","val","modifiedContent","convertHtmlToString","setProperty","codeContent","nativeElement","localSub","textArea","toTop","scrollTop","toLeft","scrollLeft","pre","add","__decorate","static","selector","templateUrl","styleUrls"],"sources":["C:\\Projetos\\apl-web-study-sphere\\src\\app\\landing\\landing.component.ts"],"sourcesContent":["import { Component, OnInit, ElementRef, Renderer2, AfterViewChecked, AfterViewInit, ViewChild, OnDestroy } from '@angular/core';\r\nimport { LoginService } from '../shared/services/login.service';\r\nimport { Router } from '@angular/router';\r\nimport { HighlightService } from '../shared/services/highlight.service';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { fromEvent, Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-landing',\r\n  templateUrl: './landing.component.html',\r\n  styleUrls: ['./landing.component.css']\r\n})\r\nexport class LandingComponent implements OnInit, AfterViewChecked, AfterViewInit, OnDestroy {\r\n  @ViewChild('textArea', { static: true })\r\n  textArea!: ElementRef;  \r\n  @ViewChild('codeContent', { static: true })\r\n  codeContent!: ElementRef;  \r\n  @ViewChild('pre', { static: true })\r\n  pre!: ElementRef;\r\n\r\n  sub!: Subscription;\r\n  highlighted: boolean = false;\r\n  codeType = 'markup'\r\n\r\n  form = this.fb.group({\r\n    content: ''\r\n  });\r\n\r\n  get contentControl() {\r\n    return this.form.get('content');\r\n  }\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private loginService: LoginService,\r\n    private highlightService: HighlightService,\r\n    private fb: FormBuilder,\r\n    private renderer: Renderer2,\r\n    private el: ElementRef\r\n  ){}\r\n    \r\n  updateHighlight(){\r\n    this.highlightService.highlightAll();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.listenForm();\r\n    this.syncScroll();\r\n\r\n    if(this.loginService.isLoggedIn()){\r\n      this.router.navigate(['/home']);\r\n    }\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.highlighted){\r\n      this.updateHighlight()\r\n      this.highlighted = false;\r\n    }\r\n  }\r\n  \r\n  ngAfterViewInit(): void {\r\n    this.updateHighlight()\r\n  }\r\n\r\n  \r\n\r\n  ngOnDestroy(): void {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n  private listenForm() {\r\n    this.sub = this.form.valueChanges.subscribe((val) => {\r\n      const modifiedContent = this.highlightService.convertHtmlToString(val.content ?? \"\");\r\n      this.renderer.setProperty(this.codeContent.nativeElement, 'innerHTML', modifiedContent);\r\n      this.highlighted = true;\r\n    })\r\n  }\r\n\r\n  private syncScroll() {\r\n    const localSub = fromEvent(this.textArea.nativeElement, 'scroll').subscribe(() => {\r\n      const toTop = this.textArea.nativeElement.scrollTop;\r\n      const toLeft = this.textArea.nativeElement.scrollLeft;\r\n\r\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollTop', toTop)\r\n      this.renderer.setProperty(this.pre.nativeElement, 'scrollLeft', toLeft + 0.2)\r\n    });\r\n    this.sub.add(localSub);\r\n  }\r\n  \r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}